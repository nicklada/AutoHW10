# План автоматизации тестирования отправки заявки на вклад “Накопилка”

## Раздел 1. Сценарии тестирования

Тестировать будем через веб-интерфейс, т.к. работаем с продакшн-версией системы и важно, чтобы наши сценарии были максимально близки к поведению реального юзера.

### Сценарии Happy Path:
*Happy Path 1.* Заявка отправлена. Заход на форму осуществлен через меню “Вклады” и первую кнопку “Заполнить заявку” на странице “Накопительный счет”.


(кстати, на этом фото виден баг - шрифт не изменяется под размер плашки при изменении размера окна)



На главной странице открываем вкладку “Частным лицам” => кнопка “Вклады” кликаем => кнопка “Максимальный процент на любую сумму” кликаем => 1-я кнопка “Заполнить заявку” на странице “Накопительные счета” кликаем => На открывшейся странице формы заполняем форму 100% валидными данными (например: “Иван Иванов”, “+79111234567”), кликаем на agreement, кликаем на кнопку “Мы перезвоним” => Заявка отправлена, появляется страница с текстом “Спасибо, скоро мы вам перезвоним”

*Happy Path 2.* Заявка отправлена. Заход на форму осуществлен через меню “Вклады” и вторую кнопку “Заполнить заявку” на странице “Накопительный счет”.




На главной странице открываем вкладку “Частным лицам” => кнопка “Вклады” кликаем => кнопка “Максимальный процент на любую сумму” кликаем => 2-я кнопка “Заполнить заявку” на странице “Накопительные счета” кликаем => На открывшейся странице формы заполняем форму 100% валидными данными (например: “Иван Иванов”, “+79111234567”), кликаем на agreement, кликаем на кнопку “Мы перезвоним” => Заявка отправлена, появляется страница с текстом “Спасибо, скоро мы вам перезвоним”



*Happy Path 3.* Заявка отправлена. Заход на форму осуществлен через меню вкладки “Частным лицам” и первую кнопку “Заполнить заявку” на странице “Накопительный счет”.



На главной странице открываем вкладку “Частным лицам” => в меню “Вклады” кнопка “Накопилка” кликаем => 1-я кнопка “Заполнить заявку” на странице “Накопительные счета” кликаем => На открывшейся странице формы заполняем форму 100% валидными данными (например: “Иван Иванов”, “+79111234567”), кликаем на agreement, кликаем на кнопку “Мы перезвоним” => Заявка отправлена, появляется страница с текстом “Спасибо, скоро мы вам перезвоним”


*Happy Path 4.* Заявка отправлена. Заход на форму осуществлен через меню вкладки “Частным лицам” и вторую кнопку “Заполнить заявку” на странице “Накопительный счет”.



На главной странице открываем вкладку “Частным лицам” => в меню “Вклады” кнопка “Накопилка” кликаем => 2-я кнопка “Заполнить заявку” на странице “Накопительные счета” кликаем => На открывшейся странице формы заполняем форму 100% валидными данными (например: “Иван Иванов”, “+79111234567”), кликаем на agreement, кликаем на кнопку “Мы перезвоним” => Заявка отправлена, появляется страница с текстом “Спасибо, скоро мы вам перезвоним”


### Теперь тестируем конкретно форму заявки, т.к. при ее заполнении может возникнуть множество сценариев.

Каждый тестовый сценарий для тестирования формы подразумевает стандартный путь захода на страницу формы. 

Например, из Happy Path 1: 
На главной странице открываем вкладку “Частным лицам” => кнопка “Вклады” кликаем => кнопка “Максимальный процент на любую сумму” кликаем => 1-я кнопка “Заполнить заявку” на странице “Накопительные счета” кликаем => Попадаем на страницу формы заявки => заполняем форму данными, указанными в каждом из сценариев, кликаем на кнопку “Мы перезвоним” => результат зависит от сценария

#### Тестируем поле “Имя”:
В данной группе сценариев поле “Мобильный телефон” всегда заполняется полностью валидными данными (+79111234567), agreement всегда заполнено.

Разделение на позитивные и негативные сценарии весьма условно, т.к. для начала нужно бы проанализировать требования к системе (которых у меня нет). Но давайте представим, что я обратилась с данным вопросом к руководству и мне сказали, что поле имя должно принимать 1, 2 или 3 слова (И, ФИ, ФИО), каждое из которых должно содержать больше одной и менее 41 буквы и первая буква должна быть заглавная. Поле принимает только буквы русского алфавита, а также “-”.

*Позитивные сценарии* (некоторые можно и объединить):
1. Форма должна отправляться, если поле “Имя” содержит одно слово (например: “Иван”)
2. Форма должна отправляться, если поле “Имя” содержит три слова (например: “Иванов Иван Иванович”)
3. Форма должна отправляться, если поле “Имя” содержит слова из 2х букв (например: “Ив Ив”)
4. Форма должна отправляться, если поле “Имя” содержит слова из 40ка букв (например: И*40 и И*40)
5. Форма должна отправляться, если поле “Имя” содержит символ “-” (например: “Анна-Мария Петрова”)
6. Форма должна отправляться, если поле “Имя” содержит букву ё (например: “Алёна Сидорова”)

*Негативные сценарии*:
Как именно должна система реагировать на определенные негативные сценарии - уточняем в требованиях. Предположим, нам сказали, что кнопка “Мы перезвоним” должна быть неактивной + должно появляться уведомление об ошибке.
1. Форма не должна отправляться, если поле “Имя” пустое
2. Форма не должна отправляться, если поле “Имя” содержит больше 3х слов (например, 4 слова: “Иванов Иван Иван Иванович”)
3. Форма не должна отправляться, если поле “Имя” содержит слово из одной буквы (например: “И И”)
4. Форма не должна отправляться, если поле “Имя” содержит слово из сорока одной буквы (например: И*41 И*41)
5. Форма не должна отправляться, если поле “Имя” содержит слова, начинающиеся со строчной буквы (например: “иванов иван”)
6. Форма не должна отправляться, если поле “Имя” содержит нерелевантные символы (например: “И12 И34”)


#### Тестируем поле “Мобильный телефон”:
В данной группе сценариев поле “Имя” всегда заполняется полностью валидными данными (“Иванов Иван”), agreement всегда заполнено.

Для начала также уточняем требования: что должно принимать данное поле, чтобы форма могла быть отправлена. Предположим, данное поле принимает только номер 11 цифр, первая цифра должна быть 7 или 8, также поле принимает знак “+”.
При некорректном заполнении данного поля кнопка “Мы перезвоним” неактивна +  должно появляться уведомление об ошибке.

*Позитивные сценарии* (некоторые можно и объединить):
1. Форма должна отправляться, если поле “Мобильный телефон” содержит 11 цифр и начинается с цифры 8 (например: 89111234567)

*Негативные сценарии*:

1. Форма не должна отправляться, если поле “Мобильный телефон” пустое
2. Форма не должна отправляться, если поле “Мобильный телефон” содержит меньше 11 цифр (например, 10 цифр: “+7911123456”)
3. Форма не должна отправляться, если поле “Мобильный телефон” содержит больше 11 цифр (например, 12 цифр: “+791112345678”)
4. Форма не должна отправляться, если поле “Мобильный телефон” начинается с невалидной цифры (+191112345678)
6. Форма не должна отправляться, если поле “Мобильный телефон” содержит нерелевантные символы (например “вдлопраовлы”)

#### Тестируем кнопку agreement (слева от “Я согласен”): 
В данной группе сценариев поля “Имя” и “Мобильный телефон” всегда заполняется полностью валидными данными (“Иванов Иван”, “+79111234567”).

Т.к. единственно возможный позитивный сценарий уже протестирован, тестируем негативный:
Форма не должна отправляться, если не было клика по кнопке agreement. Кнопка “Мы перезвоним” неактивна +  должно появляться уведомление об ошибке.


#### Тестируем доступность формы о персональных данных:
Содержание формы о персональных данных должно быть доступно по ссылке из заявки. 
Заходим на страницу заявки, кликаем на ссылку “персональных данных”. Должно открыться содержание формы. При нажатии на кнопку закрытия - содержание формы должно закрываться.

## Раздел 2. Перечень используемых инструментов

### Среда разработки - IntelliJ IDEA CE. 
Если такой проект поручили делать мне - похоже, в команде у нас начинающие разработчики. Наша цель будет - сократить число ошибок и минимизировать время разработки тестов. Это и позволит сделать нам IDE благодаря встроенному редактору кода. Если будем делать ошибки в коде - они будут сразу же видны и будет возможность их исправить на месте. К тому же, в IDE легко работать с JAVA - язык, на котором будем писать автотесты. И также IDE интегрирована с Git, который мы также будем использовать.

### Язык проекта - Java 11. 
Выбор остановлен на Java ввиду высокой распространенности данного языка, а также универсальности. “Написано однажды - работает везде” - наш код будет запускаться на разных платформах, в случае, если мы решим что-то изменить в окружении, мы сможем продолжать работать с текущим кодом. 
Java используют и развивают многие уважаемые компании (FB, Twitter). Ясно, что в ближайшем будущем язык, а вместе с ним и наш код, не устареет.
К тому же Java позволяет подключать к проекту различные библиотеки, обеспечивающие гибкую реализацию потребностей проекта. Например, фреймворк JUNIT.
Последний аргумент: с экономической точки зрения - Java - очень распространенный язык, на нем пишут многие программисты, так что найти специалистов будет относительно нетрудно и исключены простои из-за отсутствия нужных сотрудников.
11 версия вышла в 2018 году и уже показала свою стабильность (а также содержит некоторые полезные улучшения в методах по сравнению с Java 9).

### Система сборки проекта - Gradle. (Альтернатива - Maven).
Если в команде привыкли работать с Maven - можно остаться в рамках данной системы сборки. Если есть возможность выбора - лучше делать проект на Gradle, т.к. 1) Gradle легко масштабируется (легко увеличивает производительность), а с нашим проектом нужно закладывать возможность масштабирования 2) Gradle поддерживает многопроектные сборки (а Maven поддерживает только сборку группы независимых проектов) - в таком большом проекте, как тестирование сайта Альфа - банка скорее всего будет много взаимосвязанных проектов.

### Система контроля версий - Git. 
Очевидно, что в таком масштабном проекте как тестирование сайта Альфа-банка будет задействована большая команда. Для того, чтобы у всех была возможность взаимодействовать с проектом up-to-date, используем Git. 
Почему именно Git:
ЛСКВ нам не подходят, т.к. над проектом трудится команда, а не один человек. ЦСКВ тоже - мы не можем позволить сломанному серверу остановить работу над проектом.
В Git удобно откатывать изменения, если что-то пошло не так. Также удобно то, что есть система веток - можем разрабатывать альтернативную версию проекта на другой ветке и, если разработка увенчается успехом, смерджить ее с основной веткой. 

### Тестовый фреймворк - JUNIT 5
Альтернатива: TestNG
Прочитав множество источников не вижу явных преимуществ одной системы над другой. 
Возможности аннотаций TestNG шире, однако JUNIT - популярнее. Т.к. JUNIT популярнее - легче будет найти ответы на сложные вопросы, а сокращение времени на решение проблем = сокращение времени на тестирование.

### Selenium Web Driver с оберткой Selenide
Для тестирования через веб-интерфейс не обойтись без Selenium Web Driver. Применение обертки Selenide обосновано сокращением времени на написание тестов, а также сокращением строк кода (не нужно загружать driver, Selenide сам запустит браузер, откроет нужную страницу и закроет браузер).

### Lombok
Аннотации помогут нам избавиться от бесконечной генерации конструкторов, сократить размер и улучшить читаемость кода.

### Java Faker
В том случае, если данные в проекте не будут захардкожены, понадобится их источник.
Данные для формы простые - их можно генерить с помощью Faker, настроенного под текущий регион.

## Раздел 3. Перечень необходимых разрешений/данных/доступов от банка.

* Валидные данные будут генериться через Faker, невалидные данные будут передаваться в Data Generator соответственно требуемым для них параметрам. Реальные данные пользователей для нашей задачи не обязательны, поэтому мы не будем их использовать (следовательно, избежим рисков и необходимых разрешений, связанных с их использованием).

* Какие-либо доступы и пароли для данного проекта не понадобятся (заявку на вклад может отправить любой, даже незарегистрированный пользователь - следовательно, пользователя создавать не нужно).

* Отправление заявки на вклад - одна из основных функций интернет - банка, поэтому имеет смысл тестировать на Production (тем более собранную версию сервиса нам не дали). Учитывая прописанные сценарии (небольшое количество), данное тестирование не станет серьезной нагрузкой, способной замедлить работу Production системы. Для такого тестирование нужно будет разрешение. 

* Мы тестируем публичный сервис, но для этого нам обязательно нужно письменное разрешение владельца (Альфа-банка). В разрешении обязательно указываем все инструменты, которые будем использовать, чтобы потом не было претензий.

*Кстати, интересно, что отправка заявки никак не защищена от роботов. При большом желании и технических возможностях кто- то может отправлять бесконечно большое число заявок с автосгенерированными данными.Поэтому я бы задумалась о нагрузочном тестировании.

## Раздел 4. Перечень и описание возможных рисков при автоматизации

1. Нагрузка на Production систему (если тестируем на ней)
2. Ложные срабатывания тестов (при ошибках в коде или в генерации валидных данных). Отсюда падение доверия к тестам и игнорирование их результатов в дальнейшем.
3. Значительное увеличение времени на тестирование (а, следовательно, и стоимости). Возможно, в данном конкретном случае было бы дешевле и быстрее провести ручное тестирование по указанным сценариям.
4. Проблемы с CI  - разные версии проекта могут привести к путаннице в коде и внутри команды.
5. Изменение какого - то элемента в production- версии повлечет за собой падение всех тестов. Например, изменится какой - то элемент (кнопка) - тесты перестанут работать. Придется заново их переписывать.

## Раздел 5. Перечень необходимых специалистов для автоматизации.

* Для такого небольшого проекта достаточно будет одного QA -инженера, владеющего всеми перечисленными инструментами. Однако, чтобы не допустить ошибок в коде - опытный руководитель (Senior QA-инженер или тимлид QA) должен выполнить code review (т.к. мы тестируем критически важный функционал на production версии - ошибки будут стоить дорого). 

* Если мы говорим о расширении проекта и тестирование большей функциональности  - потребуется больше специалистов (из расчета 1 QA - инженер на 3-4 разработчиков).

## Раздел 6. Интервальная оценка с учётом рисков (в часах).

* Оценка зависит от опыта конкретных специалистов в подобном типе тестирования.
* Предположим, что у специалиста уже был опыт подобного тестирования и он знаком со всеми инструментами.
* В таком случае на проект понадобится 7 рабочих часов: 3 часа на написание самого кода, еще столько же - на проверку кода и согласования, час - на оформление баг - репортов при нахождении багов. 
